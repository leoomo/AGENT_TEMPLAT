{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "task.schema.json",
  "title": "Task Configuration",
  "description": "Schema for task.json - Agent 工作流任务定义",
  "type": "object",
  "required": ["project", "tasks"],
  "properties": {
    "project": {
      "type": "string",
      "description": "项目名称"
    },
    "description": {
      "type": "string",
      "description": "项目描述"
    },
    "tasks": {
      "type": "array",
      "description": "任务列表",
      "items": {
        "type": "object",
        "required": ["id", "title", "steps", "passes"],
        "properties": {
          "id": {
            "type": ["integer", "string"],
            "description": "任务唯一标识符"
          },
          "title": {
            "type": "string",
            "description": "任务标题",
            "minLength": 1
          },
          "description": {
            "type": "string",
            "description": "任务详细描述"
          },
          "priority": {
            "type": "integer",
            "description": "优先级 (1=最高, 5=最低)",
            "minimum": 1,
            "maximum": 5,
            "default": 3
          },
          "depends_on": {
            "type": "array",
            "description": "前置任务 ID 列表",
            "items": {
              "type": ["integer", "string"]
            }
          },
          "steps": {
            "type": "array",
            "description": "实现步骤（也是验收标准）",
            "items": {
              "type": "string"
            },
            "minItems": 1
          },
          "acceptance_criteria": {
            "type": "array",
            "description": "验收标准列表",
            "items": {
              "type": "string",
              "description": "支持格式: 'command: <cmd>', 'file: <path>', 'manual: <desc>'"
            }
          },
          "passes": {
            "type": "boolean",
            "description": "任务是否通过验收",
            "default": false
          },
          "blocked": {
            "type": "boolean",
            "description": "任务是否被阻塞",
            "default": false
          },
          "blocked_reason": {
            "type": ["string", "null"],
            "description": "阻塞原因"
          },
          "notes": {
            "type": "string",
            "description": "额外备注"
          }
        },
        "additionalProperties": true
      }
    }
  },
  "additionalProperties": true
}
